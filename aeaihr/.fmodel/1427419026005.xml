<mas:MasterSubFuncModel xmlns:mas="http://www.hotweb.agileai.com/model/mastersub"><mas:BaseInfo detailJspName="evection/HrEvectionManageEdit.jsp" detailTitle="出差信息" template="baseTabed" listJspName="evection/HrEvectionManageList.jsp" listTitle="出差报销" tableName="hr_evection" tablePK="EVE_ID" defaultTabId="_base"><mas:Service serviceId="hrEvectionManageService" ImplClassName="com.agileai.hr.bizmoduler.evection.HrEvectionManageImpl" InterfaceName="com.agileai.hr.bizmoduler.evection.HrEvectionManage"/><mas:Handler editHandlerId="HrEvectionManageEdit" editHandlerClass="com.agileai.hr.controller.evection.HrEvectionManageEditHandler" listHandlerId="HrEvectionManageList" listHandlerClass="com.agileai.hr.controller.evection.HrEvectionManageListHandler"/><mas:SqlResource sqlNameSpace="hr_evection" sqlMapPath="sqlmap/hr_evection.xml"/><mas:QueryListSql>select a.EVE_ID,a.EVE_APPLY_USER,a.EVE_TOGETHER,a.EVE_START_TIME,a.EVE_OVER_TIME,
a.EVE_REIMBURSEMENT_TIME,a.EVE_DAYS,a.EVE_SUBSIDY,a.EVE_APPROVE_USER,
a.EVE_APPROVE_TIME,a.EVE_APPROVE_OPINION,a.EVE_REASON,b.USER_NAME,
c.EXPE_OTHER,c.EXPE_TRANSPORTATION_FEE,
a.EVE_SUBSIDY+c.EXPE_OTHER+c.EXPE_TRANSPORTATION_FEE AS EVE_TOTAL_MONEY
from hr_evection a left join security_user b on a.EVE_APPLY_USER=b.USER_CODE left join hr_expenses c 

on a.EVE_ID=c.EVE_ID
where 1=1
and a.EVE_START_TIME = #eve_start_Time#
and b.USER_NAME like '%$user_Name$%'
order by EVE_START_TIME</mas:QueryListSql><mas:SubTableInfo tableName="hr_expenses" editMode="listDetailMode" foreignKey="EVE_ID" sortField="" tabName="费用清单" subTableId="HrExpenses" primaryKey="EXPE_ID"><mas:QueryListSql>select EXPE_ID,EVE_ID,EXPE_DEPART,EXPE_DESTINATION,EXPE_DEPART_TIME,EXPE_COMEBACK_TIME,EXPE_TRANSPORTATION_WAY,EXPE_TRANSPORTATION_FEE,EXPE_OTHER,EXPE_REMARKS
from hr_expenses
where EVE_ID=#EVE_ID#</mas:QueryListSql></mas:SubTableInfo></mas:BaseInfo><mas:ListView><mas:ParameterArea><mod:FormObject label="开始时间" dataType="date" format="yyyy-MM-dd" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>eve_start_Time</mod:Id><mod:Name>eve_start_Time</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_be_date" param0=""/></mod:FormObject><mod:FormObject label="姓名" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>user_Name</mod:Id><mod:Name>user_Name</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text></mod:FormObject></mas:ParameterArea><mas:ListTableArea exportCsv="true" exportXls="true" pagination="true" sortAble="true"><mod:Row rsIdColumn="EVE_ID" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Column cell="string" property="EVE_APPLY_USER" format="" title="出差人编码" width="100" mappingItem=""/><mod:Column cell="string" property="USER_NAME" format="" title="姓名" width="100" mappingItem=""/><mod:Column cell="string" property="EVE_TOGETHER" format="" title="同行人" width="100" mappingItem=""/><mod:Column cell="date" property="EVE_START_TIME" format="yyyy-MM-dd" title="开始时间" width="100" mappingItem=""/><mod:Column cell="date" property="EVE_OVER_TIME" format="yyyy-MM-dd" title="结束时间" width="100" mappingItem=""/><mod:Column cell="date" property="EVE_REIMBURSEMENT_TIME" format="yyyy-MM-dd" title="报销时间" width="100" mappingItem=""/><mod:Column cell="numeric" property="EVE_DAYS" format="" title="出差天数" width="100" mappingItem=""/><mod:Column cell="numeric" property="EVE_SUBSIDY" format="" title="补助金额" width="100" mappingItem=""/><mod:Column cell="string" property="EVE_APPROVE_USER" format="" title="核准人" width="100" mappingItem=""/><mod:Column cell="date" property="EVE_APPROVE_TIME" format="yyyy-MM-dd" title="核准时间" width="100" mappingItem=""/><mod:Column cell="numeric" property="EVE_TOTAL_MONEY" format="" title="汇总费用" width="100" mappingItem=""/></mod:Row></mas:ListTableArea></mas:ListView><mas:EditMainView><mas:MasterEditArea><mod:FormObject label="主键" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Hidden><mod:Id>EVE_ID</mod:Id><mod:Name>EVE_ID</mod:Name><mod:IsPK>Y</mod:IsPK><mod:DefValue value="" isVariable="false"/></mod:Hidden></mod:FormObject><mod:FormObject label="出差人编码" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_APPLY_USER</mod:Id><mod:Name>EVE_APPLY_USER</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/><mod:Validation type="must_be_char8number" param0=""/></mod:FormObject><mod:FormObject label="报销时间" dataType="date" format="yyyy-MM-dd" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_REIMBURSEMENT_TIME</mod:Id><mod:Name>EVE_REIMBURSEMENT_TIME</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_be_date" param0=""/></mod:FormObject><mod:FormObject label="同行人" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_TOGETHER</mod:Id><mod:Name>EVE_TOGETHER</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text></mod:FormObject><mod:FormObject label="开始时间" dataType="date" format="yyyy-MM-dd" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_START_TIME</mod:Id><mod:Name>EVE_START_TIME</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/><mod:Validation type="must_be_date" param0=""/></mod:FormObject><mod:FormObject label="结束时间" dataType="date" format="yyyy-MM-dd" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_OVER_TIME</mod:Id><mod:Name>EVE_OVER_TIME</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/><mod:Validation type="must_be_date" param0=""/></mod:FormObject><mod:FormObject label="出差天数" dataType="numeric" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_DAYS</mod:Id><mod:Name>EVE_DAYS</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/><mod:Validation type="must_be_int" param0=""/></mod:FormObject><mod:FormObject label="补助金额" dataType="numeric" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_SUBSIDY</mod:Id><mod:Name>EVE_SUBSIDY</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/><mod:Validation type="must_be_num" param0=""/></mod:FormObject><mod:FormObject label="核准人" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_APPROVE_USER</mod:Id><mod:Name>EVE_APPROVE_USER</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text></mod:FormObject><mod:FormObject label="核准时间" dataType="date" format="yyyy-MM-dd" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_APPROVE_TIME</mod:Id><mod:Name>EVE_APPROVE_TIME</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_be_date" param0=""/></mod:FormObject><mod:FormObject label="核准结果" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Select><mod:Id>EVE_APPROVE_RESULT</mod:Id><mod:Name>EVE_APPROVE_RESULT</mod:Name><mod:DefValue value="" isVariable="false"/><mod:ValueProvider>EVE_APPROVE_RESULT</mod:ValueProvider></mod:Select></mod:FormObject><mod:FormObject label="核准意见" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:TextArea><mod:Id>EVE_APPROVE_OPINION</mod:Id><mod:Name>EVE_APPROVE_OPINION</mod:Name><mod:DefValue value="" isVariable="false"/></mod:TextArea><mod:Validation type="length_limit" param0="60"/></mod:FormObject><mod:FormObject label="汇总费用" dataType="numeric" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EVE_TOTAL_MONEY</mod:Id><mod:Name>EVE_TOTAL_MONEY</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_be_num" param0=""/></mod:FormObject><mod:FormObject label="出差事由" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:TextArea><mod:Id>EVE_REASON</mod:Id><mod:Name>EVE_REASON</mod:Name><mod:DefValue value="" isVariable="false"/></mod:TextArea><mod:Validation type="length_limit" param0="60"/></mod:FormObject></mas:MasterEditArea><mas:SubListViewArea tabName="费用清单" subTableId="HrExpenses" sortField="" handlerId="HrExpensesEditBox" primaryKey="EXPE_ID"><mod:Row rsIdColumn="EXPE_ID" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Column cell="string" property="EXPE_DEPART" format="" title="出发地" width="100" mappingItem=""/><mod:Column cell="string" property="EXPE_DESTINATION" format="" title="目的地" width="100" mappingItem=""/><mod:Column cell="date" property="EXPE_DEPART_TIME" format="yyyy-MM-dd HH:mm" title="出发时间" width="100" mappingItem=""/><mod:Column cell="date" property="EXPE_COMEBACK_TIME" format="yyyy-MM-dd" title="返程时间" width="100" mappingItem=""/><mod:Column cell="numeric" property="EXPE_TRANSPORTATION_WAY" format="" title="交通方式" width="100" mappingItem=""/><mod:Column cell="numeric" property="EXPE_TRANSPORTATION_FEE" format="" title="交通费用" width="100" mappingItem=""/><mod:Column cell="string" property="EXPE_OTHER" format="" title="其他费用" width="100" mappingItem=""/><mod:Column cell="string" property="EXPE_REMARKS" format="" title="备注" width="100" mappingItem=""/></mod:Row></mas:SubListViewArea></mas:EditMainView><mas:EditPboxView subTableId="HrExpenses" jspName="evection/HrExpensesEditBox.jsp" handlerId="HrExpensesEditBox" handlerClass="com.agileai.hr.controller.evection.HrExpensesEditBoxHandler"><mas:SubPboxEditArea><mod:FormObject label="主键" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Hidden><mod:Id>EXPE_ID</mod:Id><mod:Name>EXPE_ID</mod:Name><mod:IsPK>Y</mod:IsPK><mod:DefValue value="" isVariable="false"/></mod:Hidden></mod:FormObject><mod:FormObject label="出差标识" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Hidden><mod:Id>EVE_ID</mod:Id><mod:Name>EVE_ID</mod:Name><mod:IsPK>N</mod:IsPK><mod:DefValue value="" isVariable="false"/></mod:Hidden></mod:FormObject><mod:FormObject label="出发地" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EXPE_DEPART</mod:Id><mod:Name>EXPE_DEPART</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/></mod:FormObject><mod:FormObject label="目的地" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EXPE_DESTINATION</mod:Id><mod:Name>EXPE_DESTINATION</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/></mod:FormObject><mod:FormObject label="出发时间" dataType="date" format="yyyy-MM-dd HH:mm" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EXPE_DEPART_TIME</mod:Id><mod:Name>EXPE_DEPART_TIME</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/><mod:Validation type="must_be_date" param0=""/></mod:FormObject><mod:FormObject label="返程时间" dataType="date" format="yyyy-MM-dd" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EXPE_COMEBACK_TIME</mod:Id><mod:Name>EXPE_COMEBACK_TIME</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/><mod:Validation type="must_be_date" param0=""/></mod:FormObject><mod:FormObject label="交通方式" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Select><mod:Id>EXPE_TRANSPORTATION_WAY</mod:Id><mod:Name>EXPE_TRANSPORTATION_WAY</mod:Name><mod:DefValue value="" isVariable="false"/><mod:ValueProvider>EXPE_TRANSPORTATION_WAY</mod:ValueProvider></mod:Select><mod:Validation type="must_not_empty" param0=""/></mod:FormObject><mod:FormObject label="交通费用" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EXPE_TRANSPORTATION_FEE</mod:Id><mod:Name>EXPE_TRANSPORTATION_FEE</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text><mod:Validation type="must_not_empty" param0=""/></mod:FormObject><mod:FormObject label="其他费用" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:Text><mod:Id>EXPE_OTHER</mod:Id><mod:Name>EXPE_OTHER</mod:Name><mod:DefValue value="" isVariable="false"/><mod:Size>24</mod:Size></mod:Text></mod:FormObject><mod:FormObject label="备注" dataType="string" format="" xmlns:mod="http://www.hotweb.agileai.com/model"><mod:TextArea><mod:Id>EXPE_REMARKS</mod:Id><mod:Name>EXPE_REMARKS</mod:Name><mod:DefValue value="" isVariable="false"/></mod:TextArea></mod:FormObject></mas:SubPboxEditArea></mas:EditPboxView></mas:MasterSubFuncModel>